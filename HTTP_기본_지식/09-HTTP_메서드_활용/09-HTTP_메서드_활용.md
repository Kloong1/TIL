# HTTP 메서드의 활용 - 클라이언트에서 서버로 데이터 전송

### 클라이언트에서 서버로 데이터를 전달하는 방식은 크게 2가지로 구분할 수 있다
- 쿼리 파라미터를 통한 데이터 전송
	- GET에서 주로 사용한다.
	- 주로 정렬 필터(검색어, 정렬 조건 등)에 사용된다.
- 메시지 바디를 통한 데이터 전송
	- POST, PUT, PATCH에서 주로 사용한다.
	- ex) 회원 가입, 상품 주문, 리소스 등록, 리소스 변경 등


## 클라이언트에서 서버로 데이터를 전송하는 예시 4가지

### 1. 정적 데이터 조회
이미지, 정적 텍스트 문서 등을 조회하는 경우. **일반적으로 쿼리 파라미터를 사용할 필요가 없다.**

![](스크린샷%202022-04-19%20오후%2010.33.05.png)

클라이언트가 추가적인 데이터를 전송하지 않는다. 원하는 정적 데이터의 URL만 서버로 전달해주면 된다.

### 2. 동적 데이터 조회
검색, 혹은 게시판 정렬 및 필터링 등의 경우. **쿼리 파라미터를 사용하면 된다.**

![](스크린샷%202022-04-19%20오후%2010.36.08.png)

검색어, 필터 등을 쿼리 파라미터로 전달한다. 서버는 쿼리 파라미터를 기반으로 필터링해서 결과를 동적으로 생성한다.

- 조회 조건을 줄여주는 필터(검색어), 조회 결과를 정렬하는 정렬 조건에 주로 사용된다.
- 조회이기 때문에 GET에서 주로 사용한다.
- GET은 쿼리 파라미터를 사용해서 서버에 데이터를 전달할 수 있다.

### 3. HTML Form으로 데이터 전송
회원 가입, 상품 주문, 데이터 변경 등의 상황에서 HTML Form을 통해 데이터를 전송할 수 있다.

#### POST 메서드로 서버에 저장할 데이터를 전송
![](스크린샷%202022-04-19%20오후%2010.39.32.png)

submit 버튼을 누르면, 웹 브라우저가 Form의 정보를 읽어서 HTTP 메시지를 생성한다. 메시지 바디를 잘 보면 쿼리 파라미터와 비슷한 형태인 것을 확인할 수 있다.

#### GET 메서드로 서버에 저장할 데이터를 전송...?
![](스크린샷%202022-04-19%20오후%2010.44.02.png)

GET 메서드는 메시지 바디를 사용하지 못하는 경우가 있기 때문에, 웹 브라우저가 Form의 내용을 읽어서 쿼리 파라미터로 만든 뒤 URL 옆에 붙여준다.

하지만 위의 예시는 잘못된 예시이다. 여기서는 서버에 저장할 데이터를 전송하는 상황이므로 리소스 변경이 일어나기 때문에 GET을 사용하면 안된다. GET은 안전하고 멱등한 메소드이다! GET은 리소스 조회에만 사용되어야 한다

#### GET 메서드로 조회할 데이터를 서버에 전송
![](스크린샷%202022-04-19%20오후%2010.46.47.png)

리소스 조회에 GET을 사용한 상황. 웹 브라우저가 Form의 내용을 읽어서 쿼리 파라미터로 만들었다.

#### multipart/form-data로 파일 전송
![](스크린샷%202022-04-19%20오후%2010.48.26.png)

Content-Type이 앞에서 POST로 form 데이터를 전송했을 때는 `x-www-form-urlencoded` 였는데, 여기서는 `multipart/form-data` 로 바뀐 것을 볼 수 있다. Form에서 `encrypte="multipart/form-data"` 로 설정해줬기 때문.

>x-www-form-urlencoded는 자주 볼 수 잇는 한글 URL 입력하면 %XX 이런 형태로 바뀌는 그 인코딩을 말하는 것이다. Form의 내용으로 영어 외의 다른 문자가 입력되면 그 문자를 알아서 인코딩해서 메시지 바디에 넣어준다.

웹 브라우저가 form에 들어있는 여러 데이터를, boundary를 기준으로 나누어서 메시지 바디에 넣어준다.

즉 boundary로 구분 되는 multipart 메시지 바디로, form에 입력된 다양한 타입의 데이터를 한 번에 보낼 수 있다.

#### HTML Form 데이터 전송 정리
- HTML Form을 통해 POST request를 할 수 있다.
	- ex) 회원 가입, 상품 주문, 데이터 변경 등
- 기본 Content-Type은 `Content-Type: application/x-www-form-urlencoded` 이다.
	- form의 내용을 쿼리 파라미터와 비슷한 형태의 `key=value`  형태로 파싱해서, 메시지 바디에 담아 전송한다.
	- 전송할 데이터를 url encoding 처리 한다.
		- ex) abc김 -> abc%EA%B9%80
- HTML Form은 GET request도 가능하다.
	- Form의 데이터는 쿼리 파라미터 형태로 전송된다.
- `Content-Type: multipart/form-data`
	- 다양한 타입의 파일들과 폼의 내용을 함께 전송 가능하다.
	- 파일 업로드 같은 바이너리 데이터 전송 시 사용된다.
- **HTML Form 전송은 GET과 POST만 지원한다!**

### 4. HTTP API를 통한 데이터 전송
HTTP 메시지를 직접 만들어서 보낸다. 물론 라이브러리를 사용해서 어렵지 않게 만들 수 있다.

##### HTTP API를 통한 데이터 전송 예시
![](스크린샷%202022-04-19%20오후%2011.10.57.png)

- 서버끼리 통신할 때 사용한다.
	- ex) 백엔드 시스템 통신.
- 앱 클라이언트에서 많이 사용한다.
- 웹 클라이언트에서도 사용한다.
	- HTML에서 Form을 사용한 전송 대신 자바 스크립트를 통한 통신에 사용한다 (AJAX)
	- ex) React, VueJs 같은 웹 클라이언트
- GET 메서드는 쿼리 파라미터로 데이터를 전송할 수 있다.
- POST, PUT, PATCH 등의 메서드의 경우에는 메시지 바디를 통해 데이터를 전송할 수 있다.
- `Content-Type: application/json` 을 주로 사용한다. 사실상 표준이다.