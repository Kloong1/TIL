# HTTP 전송 방식 헤더

## 전송 방식의 종류
- 단순 전송
- 압축 전송
- 분할 전송
- 범위 전송 (전체 범위 중 일부만 전송)


## 단순 전송
![](스크린샷%202022-04-25%20오후%2010.54.51.png)
- 요청에 대한 응답으로 리소스를 줄 때, Content-Length에 메시지 바디의 길이를 담아서 전달한다.
- 메시지 바디의 길이를 정확하게 알 수 있을 때만 사용한다.


## 압축 전송
![](스크린샷%202022-04-25%20오후%2010.56.42.png)
- 압축을 통해 전달할 리소스의 크기를 줄인다.
- Content-Length에 압축된 메시지 바디의 길이를 담아서 전달한다.
- Content-Encoding에 압축 방식에 대한 정보를 담아서 전달해야한다.


## 분할 전송
![](스크린샷%202022-04-25%20오후%2011.00.40.png)

- 리소스를 분할해서 (chuncked) 전송한다.
- 리소스의 크기가 크면, 한번에 전송하는데 (단순 전송을 하면) 오랜 시간이 걸린다.
- 따라서 리소스를 분할한 뒤, 분할한 리소스의 크기와 함께 분할한 리소스를 한 chunck 단위로 전송한다.
- 위 그림에서는 마치 한 번에 보낸 것 같지만 각각의 chunck를 따로 보낸것이라고 한다.
- 클라이언트는 각 chunck를 받을 때마다 바로바로 사용하면 되기 때문에 응답성이 좋아진다.
- 리소스를 전부 보내면 `0 \r\n` 을 보내서 리소스 전송이 끝났음을 알린다.
- `Transfer-Encoding: chuncked` 헤더가 분할 전송을 의미한다.
- **Contents-Length 헤더를 사용하면 안된다.**
	- 리소스의 전체 크기를 예상할 수 없는 경우가 존재하기 때문.
	- 이미 각각의 chunck에 chunck의 length 정보가 들어있다.

## 범위 전송
![](스크린샷%202022-04-25%20오후%2011.05.30.png)

- 클라이언트는 `Range` 헤더를 사용해 리소스의 범위를 지정해서 요청할 수 있다.
	- 이전 요청에서 리소스의 일부를 이미 받은 상황이거나, 네트워크 오류로 인해 리소스의 일부만 받지 못한 경우에 유용하게 사용할 수 있다.
	- 리소스 전부를 다시 요청하는 것보다 훨씬 효율적이다.
- 서버는 `Content-Range` 헤더로 전송하는 리소스가 전체 리소스 중 어느 범위의 리소스인지에 대한 정보를 전달할 수 있다.