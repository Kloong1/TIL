# HTTP 메서드 5가지
HTTP 메서드는 클라이언트가 서버에 요청을 할 때, 서버가 해주길 기대하는 어떤 일련의 행위이다.

## 주요 메서드
- GET: 리소스 조회
- POST: 요청 데이터(클라이언트가 보낸 데이터) 처리. 주로 등록에 사용됨.
- PUT: 클라이언트가 보낸 리소스로 대체, 해당 리소스가 없으면 생성
- PATCH: 리소스의 일부를 변경
- DELETE: 리소스 삭제

최근에는 이 리소스라는 용어가 Representation 이라는 용어로 바뀌었다고 한다.

## 기타 메서드 (사용 빈도가 상대적으로 낮은 메서드)
- HEAD: GET과 동일하지만, 바디 부분을 제외하고 status-line과 HTTP header만 요청함.
- OPTIONS: 대상 리소스에 대한 통신 가능 옵션(메서드)을 설명(주로 CORS에서 사용)
- CONNECT: 대상 자원으로 식별되는 서버에 대한 터널을 설정
- TRACE: 대상 리소스에 대한 경로를 따라 메시지 루프백 테스트를 수행

## GET
![](스크린샷%202022-04-19%20오후%208.45.41.png)
- 리소스 조회를 요청하는 메서드.
- URL에 있는 리소스를 달라고 요청한다.
- 서버에 전달하고 싶은 데이터는 query parameter를 통해서 전달한다.
	- ex) 검색어 등
- GET 메서드에서 쿼리 파라미터가 아닌 메시지 바디를 사용하여 데이터를 전달할 수 있지만, 일반적으로 그렇게 하지 않기 때문에 지원하지 않는 경우가 많아서 권장하지 않는다.

![](스크린샷%202022-04-19%20오후%208.48.38.png)
![](스크린샷%202022-04-19%20오후%208.48.51.png)


## POST
- 클라이언트가 POST request를 보낼 때, 메시지 바디를 통해 서버로 요청 데이터를 전달한다.
- 해당 데이터를 처리해달라고 요청하는 메서드이다.
- 서버는 요청 데이터를 처리한다.
	- 메시지 바디를 통해 들어온 데이터를 처리하는 모든 기능을 수행한다.
	- 수행하는 기능들은 미리 서버가 약속을 해둔 기능들이다.
	- 주로 전달된 데이터로 신규 리소스를 등록하거나, 프로세스 처리에 사용한다.

![](스크린샷%202022-04-19%20오후%208.51.36.png)
![](스크린샷%202022-04-19%20오후%208.52.27.png)

예시에서는 클라이언트가 /members로 POST request를 보내면, 서버는 요청 데이터를 신규 등록하도록 작동한다.

![](스크린샷%202022-04-19%20오후%208.53.36.png)

header에서 Location은 자원이 신규 생성된 URL이고, 메세지 바디에는 신규 등록된 리소스가 담겨있다.

### POST request를 받으면 서버는 데이터를 어떻게 처리한다는 거지?
공식 문서: POST 메서드는 **대상 리소스가 리소스의 고유 한 의미 체계에 따라 요청에 포함 된 표현을 처리하도록 요청**합니다.

- 예를 들어 다음과 같은 기능에 사용된다.
	- HTML 양식에 입력 된 필드와 같은 데이터 블록을 데이터 처리 프로세스에 제공
		- 예) HTML FORM에 입력한 정보로 회원 가입, 주문 등에서 사용
	- 게시판, 뉴스 그룹, 메일링 리스트, 블로그 또는 유사한 기사 그룹에 메시지 게시 
		- 예) 게시판 글쓰기, 댓글 달기
	- 서버가 아직 식별하지 않은 새 리소스 생성
		- 예) 신규 주문 생성
	- 기존 자원에 데이터 추가
		- 예) 한 문서 끝에 내용 추가하기

## POST 정리
**POST 요청이 오면 요청 데이터를 어떻게 처리할지 리소스마다 따로 정해야 함 -> 정해진 것이 없음**

1. **새 리소스 생성/등록**
	- 서버가 아직 식별하지 않은 새 리소스 생성
2. **요청 데이터 처리**
	- 단순히 데이터를 생성하거나, 변경하는 것을 넘어서 프로세스를 처리해야 하는 경우
	- 즉 단순히 값 변경을 넘어 프로세스의 상태가 변경되는 경우
		- ex) 배달 주문 시작 -> 배달 시작 -> 결제 완료
		- 각 단계마다 앱에서 어떤 버튼을 누르면 다음 단계로 넘어간다고 하자.
		- 그 버튼을 누를 때 POST 메서드로 서버에 요청을 보내면 된다.
	- POST의 결과로 새로운 리소스가 생성되지 않을 수도 있음
		- 예) POST /orders/{orderId}/start-delivery 같은 **컨트롤 URI**
		- 실무에서는 URI가 리소스만 식별하는 것이 아니라 (그렇게 하면 좋지만, 실제로는 불가능하다. 너무 이상적임) 이렇게 행위를 표현하기도 한다. 이런 URI를 컨트롤 URI라고 한다. 컨트롤 URI에서 POST를 많이 쓴다.
3. **다른 메서드로 처리하기 애매한 경우**
	- ex) JSON 포맷으로 조회를 요청할 데이터를 넘겨야 하는 경우
		- GET 메서드를 사용하기 어렵다.
		- 메시지 바디에 JSON 데이터를 넘겨야하는데, GET 메서드에서 메시지 바디에 데이터를 넣는 것을 허용하지 않는 서버가 매우 많음.
		- 이런 경우 조회 요청이지만 POST를 사용해야한다.
	- 애매하거나 어쩔 수 없는 경우 POST를 사용하면 된다!


## PUT
![](스크린샷%202022-04-19%20오후%209.22.49.png)

- 클라이언트가 보낸 데이터로 리소스를 대체한다.
	- 리소스가 이미 있으면 대체하고, 없으면 새로 생성한다.

##### 클라이언트가 이미 존재하는 리소스의 위치를 미리 알고, URI를 지정한다.
- 이것이 POST와의 가장 큰 차이점이다.
- POST에서는 새로 등록된 리소스의 URL을 미리 알 수 없다.

![](스크린샷%202022-04-19%20오후%209.25.09.png)
![](스크린샷%202022-04-19%20오후%209.25.22.png)

#### 주의! 리소스를 완전히 대체한다! (일부 수정은 불가능)
![](스크린샷%202022-04-19%20오후%209.26.03.png)
![](스크린샷%202022-04-19%20오후%209.26.11.png)

기존 리소스를 아예 덮어 써 버린 것이기 때문에, username 필드가 사라져버렸다.

**PUT은 기존의 리소스의 내용을 수정하는 것이 아니라, 대체 하는 것이다.** 수정은 PATCH 메서드를 이용하면 된다.


## PATCH
리소스의 일부 내용을 변경한다. 기존에는 PUT 메서드만 있었는데, PUT 메서드는 수정이 아닌 완전 대체이기 때문에 수정을 위해 PATCH가 생겼다.

간혹 PATCH를 지원하지 않는 서버가 존재한다. 이런 경우에는 POST를 사용하면 된다. 애매할 땐 POST!

![](스크린샷%202022-04-19%20오후%209.29.41.png)
![](스크린샷%202022-04-19%20오후%209.29.49.png)


## DELETE
리소스를 제거한다.

![](스크린샷%202022-04-19%20오후%209.30.27.png)

