# 네이버 파이낸셜 1차 면접 정리 - 2022.06.07

##### Ice breaking - 5분

##### 간단한 자기소개 - 1분

##### 자소서 관련 질문
Q1. 자소서에 쓰여있는 네이버페이 현장결제 관련 내용 -> 삼성페이 쓸 수 있는데 네이버페이 왜 씀?
본인이 생각하는 네이버페이 현장결제 개선되어야 할 부분은?
A. (과거에는) 결제 QR이 늦게 너무 나온다. 카드 꺼내는 시간과 별반 다르지 않음. 그러나 최근엔 업데이트로 인해 바로 QR이 나오더라.

Q2. QR이 바로 나왔을 떄는 사용자 입장에서는 편하겠지만, 개발자 입장에서 봤을 때 보안 관점에서는 문제 소지가 있지 않나?
A. 동일한 생각을 했었다. 하지만 최근 결제 시스템들이 전부 그런 리스크보다 편함을 더 중시하는 흐름으로 가는 것 같아서 상관 없는 듯 하다.

Q3. 그렇다면 개발자로서 보안적인 문제를 그냥 안고 가겠다는 것인가?
A. 아니다. 내가 봤을 때는 보안적으로는 문제가 분명히 있다. 하지만 포인트 충전 없이 소지 포인트로만 결제하면 보안 이슈가 생겼을 때 내부적으로 롤백할 수 있지 않을까 싶다. 하지만 포인트 충전을 하는 경우에는 문제 소지가 있을 것 같은데 해결 방법은 잘 모르겠다.

Q4. QR이 늦게나온다는 문제를 두 가지 관점에서 보면, 나오는 속도 자체가 느린것과, 단계가 많다(인증 단계)는 문제로 나눌 수 있다. 인증 단계를 없애면서 안전하게 만드는 방법이 있을까?
A. 내가 불편함을 느낀건 사실 개발자로서 보안 문제에 대한 인식이 있기 때문에 인증 단계의 불편함보다는 인증을 하는 시간이 너무 오래걸려서 QR이 늦게 나온다는 문제였음. 근데 뭐 굳이 인증 단계를 없애야 한다면, 인증 효력이 최대 x 분까지만 지속되게 해서 어느정도 위험을 줄일 수 있지만 근본적인 해결책은 아닌 것 같다.

##### 전공 질문 시작 - 면접관1
Q1. 자소서에 보면 프로그래밍에 관심이 많아서 공부를 많이 했다고 적혀있더라. 프로그램이 실행될 때 운영체제가 메모리 공간을 할당한다. 대표적으로 스택과 힙이 있다. 프로그램이 실행될 때 스택은 어떤 용도로 활용되고, 힙은 어떤 용도로 사용되는지 아는대로 말하시오.
A. 스택은 지역변수 등 메소드 내에서 사용되는 변수들이 저장되었다가, 메소드가 끝나면 사라지는 식으로 사용된다. 힙은 동적할당에 사용된다. 자바에서는 힙에서 GC가 일어난다.

Q2. 그 외에 다른 내용은?
A. 잘 모르겠다.

Q3. 스택에서 주로 사용되는 자료구조는 어떤 것이 있을까? 스택은 어떤 방식의 자료구조로 구현이 되어있을까?
A. 스택이니까 스택 아닌가? FIFO로? 아 아니 FIFO가 아니라 LIFO.

Q4. 스택이 사실 선입선출 방식으로 이루어진다. 근데 왜 선입선출인 것 같냐?
A. 운영체제에서 말인가? 음... 몰?루

Q5. 프로그램이 실행될 때 프로세스가 생성되어서 실행된다. OS에서 프로세스는 무엇이고 스레드는 무엇인가?
A. 프로세스는 실행 중인 프로그램, 그러니까 CPU의 할당을 받고 있거나 받을 수 있는 상태의 프로그램. 메모리에 올라와서 주소 공간을 할당 받고 있는 상태. 스레드는 프로세스의 실행 단위, 실행 흐름. 프로세스 안에 여러 스레드가 존재할 수 있고, 프로세스의 코드를 실행시킬 수 있다. 프로세스와 자원을 공유할 수 있다는 장점이 있음.

Q6. 스레드가 프로세스 안에서 자원을 공유한다고 하셨는데, 메모리 영역 중에서 어떤 부분을 공유하는가?
A. 전부 다 공유 가능하지 않나?

Q7. 멀티 스레딩을 하는 목적은? 어떤 효과가 있나?
A. 사용자 관점에서는 응답성 증가. 하드웨어/IO 접근에 의해 소프트웨어가 블락킹 되는 상황 발생할 수 있음. 그런 상황에서 멀티 스레딩을 하면 응답성을 높일 수 있다.

Q8. 멀티 프로세스로는 비슷한 작업이 불가능한가?
A. 동일한 작업을 프로세스로 하면, 콘텍스트 스위칭에서 비용이 더 발생하기 때문에 - 캐시 미스 등의 문제 - 효율이 떨어진다. 자원 공유에 대한 리스크는 줄어들 수 있지만, 응답성은 떨어진다.

Q9. 물론 응답성을 높이기 위해 멀티 스레딩 대신 멀티 프로세싱을 하는 경우는 없다. UI 스레드 / 비즈니스 스레드 이렇게 두고 하는게 당연하다. 정확한 예시는 아닌듯. 그렇다면 멀티 프로세스에서는 자원 공유에 대한 리스크가 적다고 햇는데, 멀티 스레딩에서 주의해야할 지점이 있다면?
A. race condition이 발생하는 critical section에 접근하게 되는 문제.

Q10. Critical section이 머임?
A. 여러 스레드가 동일한 자원에 동시에 접근하려는 부분의 코드.

Q11. 혹시 자바에서 스레드 객체의 상태와 각 상태의 의미에 대해서 말해주세요.
A. 정확한 용어는 기억이 안나는데, 
New
Runnable
Running
Blocked(Waited) - <이 부분 틀림>
Terminated

Q12. Race condition에서 스레드 상태는 어떻게 바뀌나? Race condition이 발생하면 어떤 현상이 일어나나?
A. (예시 듦) 어떤 스레드가 한 변수의 값을 변경했는데, 그 순간 다른 스레드가 해당 변수에 접근해서 값을 read 하면 변경된 값을 읽게 되고, 예상할 수 없는 프로그램 실행 결과가 나타날 수 있다.

Q13. 그런 상황이 일어나면 안된다. race condition이 발생한다는 것은 앞서서 일어나는 작업을 대기해야하는 상황이라는 것이다. 이 race condition에서 스레드는 어떤 상태가 되는가? 다시 말하면 특정 스레드가 어떤 변수의 값을 변경했다. 다른 스레드가 그 값을 읽기 위해 접근을 하면, 그 스레드가 어떤 상태가 되는가?
A. 대기 큐에 들어가서 waited 상태가 되지 않을까? Lock을 쓴다고 했을 때, blocking이 된 상태로 기다릴 것 같다.

Q14. 개발하실 때 캐시라는 걸 많이 사용하는데, 캐시가 뭐라고 생각하나?
A. 캐시는 CPU의 연산속도보다 메모리에 접근하는 속도보다 느리다보니.... 연산속도에 의한 병목현상을 막기위해 하드웨어든 소프트웨어로든 중간단계의 역할을 해주는 장치라고 할 수 있다.

Q15. 캐시의 용량이 무한할 수는 없다. 가능하면 Hit율이 떨어질만한 데이터를 삭제하는 작업이 필요하다. 일반적으로 LRU를 많이 사용하는데, LRU에 대해 설명해주시고, LRU는 어떤 자료구조를 써서 구현하면 될지 설명해보세요.
A. 가장 오래 사용되지 않은 친구를 캐시에서 삭제하는 기법. 그것이 가장 캐시 Hit율을 높일 것이라고 가정을 하는 방법.

Q16. LRU 캐시를 구현하는데 어떤 자료구조를 쓰면 좋을까? 두가지 관점에서 말해주세요. 첫 번째는 오래 쓰지 않은 값을 어떻게 관리할 것인가? 두 번째로 데이터를 효율적으로 서치하는 방법은?
A. 찾는데 가장 빠르려면, HashMap을 쓰거나 index에 대한 정보가 있으면 array가 가능한데, 캐시 특성 상 Hash가 가장 빠를 것 같다. 그리고 오래 쓰지 않은 값을 찾으려면, 캐시가 크지 않으면 스택같은 것을 사용해서 이중 연결 리스트로 스택을 구현해서 최근에 사용된 친구는 맨 위로 올리고, 삭제할 때는 맨 아래에 있는 애만 지우면 될 것 같다. 일반적으로 캐시는 크기가 작기 때문에 최근에 사용된 친구를 맨 위로 올리는 작업에 큰 오버헤드가 없을 것이다. 만약 캐시가 크면 다른 자료구조를 사용하는 것도 고려해볼 수 있을 것 같다.

Q17. 디자인 패턴과 리팩토링에 대해서 공부를 해봤을 것이다. 자소서에도 클린 코드에 대한 내용이 있더라. 디자인 패턴에 대해서 뭐라고 생각하나? 그리고 디자인 패턴의 장단점은?
A. 이쪽을 제대로 공부를 하진 않아서 잘은 모른다. 소프트웨어의 설계와 동작 방식을 구조화/체계화 시킨 것. 프로그램의 디테일한 비즈니스 로직은 다르지만, 전체적인 설계와 구조에 대해서는 차이가 없는 경우가 많다. 그런 것들을 체계화 시켜서 디자인 패턴으로 만들 수 있다. 특정 어플리케이션에서 어떤 패턴을 썼을 때, 쉽게 개발할 수 있고, 강력한 성능을 낼 수 있기 때문에 디자인 패턴을 사용한다.
디자인 패턴의 장점은 기존에 알려진 패턴을 적용했을 때 개발 효율이 올라가고, 결과물의 성능을 보장할 수 있고, 유지보수에도 장점이 있다.
단점이라고 하면 적용하는데 초기 설계비용에 대한 투자가 필요하다. 만약 패턴에 대해서 이해하지 못하는 개발자가 있다면 오히려 더 어려움을 겪지 않을까? 싶다.

Q18. 디자인 패턴에 대한 단점에 대해서 더 많이 말씀해 주신 것 같은데? 디자인 패턴 왜 써야할 이유를 못 찾겠다. 이해하지 못하는 사람의 경우 유지보수 비용이 더 상승한다는 것 아닌가? 많은 개발자들이 함께 개발을 할텐데? 본인이 생각하는 디자인 패턴을 사용하면 좋은 상황은?
A. 비즈니스는 결국 비용의 문제. 디자인 패턴을 도입하는 데 드는 비용보다 더 많은 이득을 가져올 수 있다. 프로젝트가 일정 이상 커졌을 때 디자인 패턴에 대해 개발자들이 당연히 공유를 해야하고, 그런 상황에서 개발과 유지보수를 했을 때 초기 비용보다 아득히 상회할 만한 이득을 얻을 수 있다.

Q19. 사용해 본 디자인 패턴 있나? 혹은 잘 알고있는 디자인 패턴이 있나?
A. 최근에 Spring MVC를 공부하고 있어서 MVC 패턴에 대해서 알고 있고, 예전에 웹서버를 바닥부터 구현해보려고 시도한 적이 있는데 (도중에 그만두긴 했지만) 디스패쳐 패턴을 도입하려고 했었다 구현을 하지는 않았다.

Q20. 리팩토링을 해보셨나? 토이프로젝트든 뭐든...
A. 큰 프로젝트에서 해본 적은 없고, 간단하게만 해봤다.

Q21. 리팩토링에 대한 생각을 말해주세요.
A. 코드의 가독성을 높이고 그를 통해서 유지보수에 장점을 가져다주는 작업. 중복을 제거하고, 코드를 간결하게 만들어서 한 눈에 이해할 수 있게 만드는 것. 빠르게 기능을 구현을 했을 때, 기존의 설계와는 다른 식으로 구현이 된다거나 하는 부분을 기존의 의도에 맞춰서 돌려놓는 작업도 포함되지 않을까 싶다.

Q22. 리팩토링을 하려면 결과가 달라지면 안된다. 개발이 다 끝난 상태에서 코드를 변경했을 때, 어떻게 결과가 달라지는 것을 방지 할 수 있을까?
A. 개발 과정에서 만든 테스트 코드를 최대한 활용을 해야 한다. 리팩토링을 레벨 단위로 쪼개야한다. 설계적인 레벨, 그리고 하위 레벨(코드 가독성, 중복 제거, 파라미터 개수 조절)로 나눠서, 각 레벨별로 리팩토링을 하고 테스트 코드를 돌려보고 하는 식으로 할수 있겠다. 코드의 여러 레벨이 한번에 바뀌지 않게 리팩토링을 하는게 안정적이다.

#### 전공 질문 - 면접관2
Q23. 자바 많이 써보셨나요? 자바에 GC가 있다. 자바의 GC는 기본적으로 Mark-and-sweep 기반인데, GC가 어떻게 동작하는지 설명 가능한가?
A. 힙에서 GC가 일어난다고 말씀을 드렸는데, garbage를 판단하는 기준이 객체에 대한 참조 여부로 판단한다. 힙 메모리에 영역이 있는데, 새로운 객체가 존재하는 Eden, 생성된지 얼마 안된 객체가 존재하는 Young, 오래 살아남은 객체가 존재하는 Old, 마지막으로 영구적으로 존재하는 객체가 있는 부분이 있다.
Eden -> young -> old로 오면서 Minor GC가 일어난다. unreachable한 객체가 GC에 의해 사라지면서 다음 영역으로 가는 과정이 Minor GC. Old까지 넘어온 객체들은 오랫동안 계속 rechable한 상태를 유지한 객체들인데, Old에서 주기적으로 시스템이 Major GC를 한다. unrechable한 객체를 정리하는 작업이다.
Minor GC는 주기적으로 일어나지만, Major GC는 프로그램 동작을 멈추기 때문에 덜 자주 일어난다.

Q24. Mark-and-sweep이 그렇게 일어난다. jdk 1.8에서는 G1 GC가 추가 되었다. Mark-and-sweep 방식의 GC의 단점은 무엇일까?
A. major gc가 일어날 때 프로그램이 멈춘다.

Q25. G1 GC를 몰라도 된다. stop-the-world를 어떻게 개선할 수 있을까? stop-the-world 시간을 줄일 수 있을까? 그 생각이 G1 GC가 나온 이유이다.
A. 나눠서 할 수 있지 않을까? 몰?루 ㅜㅜ

Q26. 메모리를 더 쪼갰다. 메모리를 더 잘게 쪼갤 수록 GC가 더 빨라지니까. Spring은 많이 공부 해보셨나?
A. 즉당히 했다.

Q27. 앞에서 MVC 패턴을 이야기 했는데, Spring에서 가장 많이 나오는 이야기 중 하나가 싱글톤 패턴이다. 싱글톤 패턴은 뭔가?
A. 객체를 하나만 가지고 유지하는 패턴. 컨테이너에 하나의 객체를 가지고 관리하는 패턴. 다중 사용자 시스템에서 매번 객체를 반드는 경우 부하가 크기 때문에 그런 점을 개선하기 위함. 인스턴스를 하나만 두고 공유한다.

Q28. 싱글톤 패턴의 장점과 단점에 대해서 이야기 해보시오.
A. 장점은 방금 이야기했던 객체가 과도하게 생성되는 부하를 줄일 수 있다. 단점은 단일 객체를 관리하는게 어려울 것 같다. 객체에 상태가 생기면 리스크가 생길 듯 하다.

Q29. 싱글톤 패턴을 쓰면 객체를 여러개 생성 했을 때 부하를 줄여준다고 했는데, 객체 여러개 생성하는게 부하가 많이 큰가? 우리에겐 GC가 있다.
A. 그렇게 많지는 않을 거라고 생각이 든다. worst case를 고려한다면(객체가 매우 많아지면) 부하가 있을 수야 있겠지만, 사용자가 작아지면 부하가 그렇게 크지는 않을 것 같긴 하다. 몰?루 ㅜㅜ

Q30. 질문에 말려 들지 말고 본인의 의견을 말하면 된다 ㅋㅋ; 객체 생성의 부하 정도에 따라서 싱글톤 패턴을 도입했을 때 얼마나 이득이 있을까? 이런 질문을 해볼 수 있다. Spring은 기본적으로 싱글톤 패턴을 사용하는데, 싱글톤이 아닌 요청할 때마다 객체를 생성할 수 있나?
A. 프로토타입 빈을 사용하면 된다. <아마 웹 스코프가 정답일 것 같은데 ㅜㅜ>

Q31. Spring에서 빈 스코프를 프로토타입으로 지정할 케이스는 뭐가 있을까? 어떤 상황에서 프로토타입 빈을 사용하면 좋을까? 경험했던 상황 이야기해도 좋다.
A. 사용자의 상태같은 걸 저장해야 할때? 요청이 왔을 때 사용자별로 구분을 지어야 할 필요가 있을 때.

Q32. 상태를 저장해야 할 때 만약 싱글톤을 반드시 써야한다면 어떻게 할 것인가?
A. 만약 HTTP 요청이 들어오는 상황이라면 쿠키와 DB를 활용하여 정보를 저장할 수 있을 것 같다.

Q33. 사용자 정보를 쿠키에 저장해도 되는가?
A. 어느 정도의 정보인지는 모르겠는데 단순히 통신 상황에서 휘발적인 정보는 상관 없지만, 그런 경우가 아니라면 문제가 있을 것 같다.

Q34. RDB는 써보셨나? 데이터가 많은 경우 indexing을 해야하는데, DB index를 컴퓨터 공학과 신입생한테 설명해야 한다면 어떻게 할 것인가?
A. 주소 체계를 사용해서 설명할 것 같다. 시 - 구 - 동 이 체계를 활용해서, 내가 찾고 싶은 데이터는 특정 주소의 집 안에 있는 어떤 사람인 것이다. 그 사람을 빠르게 찾기 위해서 시 -> 구 -> 동을 하나 하나 찾아가서 그 집에 찾아갔을 때, 최종적으로 그 사람을 찾는 과정으로 비유해서 설명을 할 수 있을 것 같다.

Q35. DB 내부 구조에는 index가 어떻게 구현되어 있을까? 그 것을 어떤 잘 설명된 그림처럼 표현했을 때 어떤 모양일까? 신입생한테 설명한다는 느낌으로.
A. B+ tree 등으로 indexing이 구현되어 있는 것으로 알고있는데, 주소 체계를 B+ 트리 구조로 만들어서 그릴 수 있지 않을까 싶다. 트리 각 노드를 탐색하는 과정을 주소 찾는 것에 비유해서 설명을 할 수 있지 않을까 싶다.

#### 역질문 시간 - 궁금한 거 있나요?
Q1. 가서 내가 무슨 일을 하게 될 것인지?
A. 네.파. 는 네이버 페이를 운영하는 조직, 금융에 관련된 서비스를 준비하는 조직 크게 2가지가 있다. 어디로 갈지는 모르겠지만 네이버 페이를 간다면 네이버 페이의 하위 서비스 팀으로 들어갈 것이다. 만약 입사 후에도 다른 팀으로 옮기는 것도 가능하다. 서비스나 팀이 많아서 설명이 어렵다.

면접관님 질문. 하고싶은 업무 있나요?
현장결제 쪽이 아직 성장 가능성이 높아 보여서 재미있을 것 같다. 함께 성장할 수 있다.

Q2. 만약 취준생이시라면 어떤 공부를 하실 것 같나?
A. 업무적인 영역과 면접에 관련된 부분이 따로 있을 것 같다. 면접같은 부분은 여태까지 했던 질문 키워드 위주로 공부를 하고 스스로 정의를 해보면 좋을 것 같다. 업무적인 부분에서는 거기서 살을 붙이는 거라고 볼 수 있겠다. 메모리, 디자인 패턴, 리팩토링, 자바, GC, Spring, RDB 등 에서 실무적 경험을 쌓으면 되는데, 신입은 실무적 경험을 쌓기는 힘드니까 기술적 지식을 쌓는데 노력하면 될 것 같다.

