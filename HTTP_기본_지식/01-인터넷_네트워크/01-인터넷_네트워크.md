# 인터넷 네트워크

## Internet Protocol (IP)
- 지정한 IP address에 데이터를 전달할 수 있게 하는 프로토콜.
- Packet이라는 통신 단위를 사용하여 데이터를 전달함.
- Packet에는 출발지 IP, 목적지 IP, 실제 data 등으로 구성되어있다.

### Internet Protocol의 한계
##### 1. 비연결성
패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷은 전송된다. 즉 송신자는 수신자의 상태를 알 수 없다.

##### 2. 비신뢰성
송신한 패킷이 중간에 사라지는 경우, 혹은 패킷의 순서가 뒤바뀌는 경우가 생길 수 있다. IP는 이런 문제를 해결할 수 없다.

##### 3. 프로그램 구분
같은 IP를 사용하는 호스트에서 통신하는 어플리케이션이 여러 개인 경우, IP 만으로는 어플리케이션을 식별할 수 없다.


## TCP/UDP
IP의 한계를 TCP(와 UDP)가 해결해준다!

#### 인터넷 프로토콜 스택의 4계층
![](스크린샷%202022-04-16%20오후%2010.04.12.png)

![](스크린샷%202022-04-16%20오후%2010.05.19.png)

![](스크린샷%202022-04-16%20오후%2010.08.27.png)

TCP 세그먼트의 헤더를 통해 IP로만 해결할 수 없었던 여러 문제들 (비신뢰성, 비연결성, 프로그램 구분 등)을 해결할 수 있다.

#### TCP 특징
Transmmision Control Protocol (전송 제어 프로토콜)

- 연결 지향성 - TCP 3 way handshake
	- 송신자-수신자 사이의 가상 연결이 존재함.
- 데이터의 수신됨을 보장함
- 데이터의 순서를 보장함

신뢰할 수 있는 프로토콜. 대부분의 네트워크 어플리케이션에서 TCP를 사용한다.

#### TCP 3-way handshake
![](스크린샷%202022-04-16%20오후%2010.12.23.png)

TCP 3 way handshake를 통해서 상대방의 연결 상태를 알 수 있다. TCP 3 way handshake 과정에서 상대방의 응답이 없거나 정상적이지 않다면 상대방이 연결이 불가능한 상태라는 것을 알고, 데이터를 보내지 않을 수 있다. -> **즉 IP의 비연결성 문제를 해결할 수 있다!**

#### 데이터 전달 보장, 순서 보장
TCP 3-way handshake에서 처럼, 패킷이 보내지면 수신자는 해당 패킷을 잘 받았다고 응답을 보내게 된다.

따라서 응답이 오지 않거나, 순서가 잘못 왔다는 응답을 보내면 송신자는 해당 패킷을 다시 보낼 수 있다. 이런 송수신 상태에 대한 내용은 TCP 헤더에 들어있다.


### UDP 특징
User Datagram Protocol (사용자 데이터그램 프로토콜)

- 기능이 거의 없다.
- 연결 지향적이지 않다. 따라서 연결을 위한 3 way handshake를 하지 않는다.
- 데이터의 전달 및 순서를 보장하지 않는다.
- 연결 지향적이지 않고, 데이터 전달 및 순서가 보장되지 않지만, 그로 인한 오버헤드가 없으므로 빠르고 가볍다.
- 즉 **IP에 PORT와 체크섬 정도를 추가해주는 프로토콜이라고 볼 수 있다.**
- UDP는 마치 하얀 도화지 같다고 보면 된다. 추가적인 기능을 어플리케이션에서 구현하면 다양한 방식으로 사용 가능하다.
- 인터넷에서 TCP가 지배적이었는데, TCP의 오버헤드를 줄이려는 움직임 때문에 최근에는 UDP가 다시 주목받고 있다고 한다.


## Port
하나의 IP를 사용하는 호스트에서, 동시에 여러 네트워크 어플리케이션이 통신을 하기 위해서는 추가적인 식별자가 필요하다.

이 때 port를 사용해서 같은 IP 내에서 프로세스를 구분할 수 있다.

비유를 하자면, IP는 아파트 동이고, Port는 호이다.

할당 가능한 port의 범위는 0~65535이다. 0~1023은 Well-known port이다.


## DNS
IP로 네트워크의 호스트를 식별할 수 있지만, 단순한 일련의 숫자이기 때문에 사람이 기억하기 어렵다. 또 IP는 상황에 따라 변경될 수 있다.

이런 문제를 해결하기 위해 DNS가 필요하다.

### DNS 특징
Domain Name System

- 도메인 명을 IP로 변환해준다.
- IP가 바뀌면, DNS 서버에서 도메인에 해당하는 IP를 바뀐 IP로 변경하면 된다.

![](스크린샷%202022-04-16%20오후%2010.36.28.png)