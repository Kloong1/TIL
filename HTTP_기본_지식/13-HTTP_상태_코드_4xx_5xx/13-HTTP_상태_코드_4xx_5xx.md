in# HTTP 상태 코드 4xx 5xx

## 4xx (Client error)
- 클라이언트의 HTTP request message에 잘못된 문법 등으로 인한 문제가 있어서, 서버가 요청을 수행할 수 없다.
- **오류의 원인이 클라이언트에 있음**
- **중요! 클라이언트가 애초에 잘못된 요청/데이터를 보내고 있기 때문에, 똑같은 요청을 아무리 보내도 반드시 실패한다! 클라이언트가 요청을 수정해야만 한다.**
	- 5xx 코드의 경우 서버의 상태에 따라 요청을 재시도 했을 때 성공할 가능성이 있다.

### 400 Bad Request
클라이언트가 잘못된 요청을 해서 서버가 요청을 처리할 수 없다.

- 요청 구문, 메시지 등에 문제가 있는 경우.
	- ex) 요청 파라미터가 잘못되거나, API 스펙이 맞지 않을 때
- 클라이언트는 요청 내용을 수정해서 다시 보내야한다.

### 401 Unauthorized
클라이언트가 해당 리소스에 대한 인증이 필요하다.

- 클라이언트가 인증(Authentication)이 되지 않았다.
- 401 오류 발생시 응답에 WWW-Authenticate 헤더와 함께 인증 방법을 설명해줘야 한다.
- 참고
	- 인증(Authentication): 사용자가 누구인지 확인하는 것. 예를 들어 로그인.
	- 인가(Authorization): 권한 부여. 인증을 할 수 있어도 권한은 없을 수도 있다.
	- 401 코드는 인증(Authentication)이 안 된 경우를 의미하지만, phrase는 Unauthorized여서 조금 모호하다.

### 403 Forbidden
서버가 요청을 이해했지만, 승인을 거부하는 경우.

- 주로 인증(Authentication) 자격 증명은 되었지만, 접근 권한이 불충분한 경우
- Ex) 어드민 등급이 아닌 사용자가 로그인은 했지만, 어드민 등급의 리소스에 접근하는 경우

### 404 Not Found
요청한 리소스를 찾을 수 없음

- 요청 리소스가 서버에 없음. 즉 클라이언트가 없는 리소스를 요청하는 경우.
- 또는 클라이언트가 권한이 없는 리소스를 요청하는 경우에 해당 리소스를 숨기고 싶을 때


## 5xx (Server error)
- 서버 문제로 오류가 발생한 경우.
- 서버에 문제가 있기 때문에, 클라이언트가 재시도 하면 성공할 수도 있다 (서버가 정상 복구된 경우)

### 500 Internal Server Error
서버의 문제로 오류가 발생한 경우. 오류 내용이 애매하면 500 코드를 사용하면 된다.

### 503 Service Unavailable
서비스 이용 불가

- 서버가 일시적인 과부하 또는 예정된 작업으로 잠시 요청을 처리할 수 없는 경우.
- Retry-After 헤더 필드로 얼마뒤에 복구되는지 보낼 수도 있다.
- 서비스를 이용할 수 없는 경우는 대부분 예측 불가능하므로 503 보다는 500을 자주 보게 된다.

#### 5xx 코드를 사용하는 경우
5xx 코드는 실제로 서버에 장애가 발생했을 때만 사용해야 한다. 비즈니스 로직 상 예외가 발생한다고 해서 5xx를 사용하면 문제가 생길 수 있다. 서버 모니터링도 5xx 코드를 모니터링 하는 경우가 많다.